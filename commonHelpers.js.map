{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst baseUrl = 'https://pixabay.com/api/';\n\nexport async function searchImages(value, page = 1, limitPage) {\n  try {\n    const response = await axios.get(baseUrl, {\n      params: {\n        key: '45476779 - a37d3eb685934422065bcfa30',\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        q: value,\n        page,\n        per_page: 15,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Fetch error: ', error);\n  }\n}\n\n","const ulEl = document.querySelector('.gallery');\n\nfunction imgTemplate({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `<li class=\"gallery-item> \n    <figure class=\"sign\">\n        <a href=\"${largeImageURL}\"><img class=\"list-img\" src=\"${webformatURL}\" alt=\"${tags}\" title=\"\" width=\"360\" height=\"200\"/></a><span class=\"title-img\">\n        <figcaption class=\"title-img\"><ul class=\"figcaption\">\n      <li class=\"figcaption-item\">Likes<p class=\"counter\">${likes}</p></li>\n      <li class=\"figcaption-item\">Views<p class=\"counter\">${views}</p></li>\n      <li class=\"figcaption-item\">Comments<p class=\"counter\">${comments}</p></li>\n      <li class=\"figcaption-item\">Downloads<p class=\"counter\">${downloads}</p></li>\n    </ul></figcaption>\n    </figure>\n   </li>`;\n}\n\nfunction imagesTemplate(arr) {\n  return arr.map(imgTemplate).join('');\n}\n\nexport function innerImg(hits) {\n  const markup = imagesTemplate(hits);\n  ulEl.innerHTML = markup;\n}\nexport function insertImg(hits) {\n  const markup = imagesTemplate(hits);\n  ulEl.insertAdjacentHTML('beforeend', markup);\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport simpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { searchImages } from './js/pixabay-api';\nimport { innerImg, insertImg } from './js/render-functions';\n\nconst refs = {\n  btnSubEl: document.querySelector('.btn-search'),\n  formEl: document.querySelector('.form'),\n  input: document.querySelector('[name=\"text\"]'),\n  ul: document.querySelector('ul'),\n  btnLoadMore: document.querySelector('.load-more'),\n};\n\nlet limitPage = 0;\nlet userValue;\nlet page = 1;\n\nrefs.formEl.addEventListener('submit', async evt => {\n  try {\n    evt.preventDefault();\n    startLoader();\n    userValue = refs.input.value.trim();\n    page = 1;\n\n    if (!userValue) {\n      iziError();\n    } else {\n      const res = await searchImages(userValue, page);\n\n      limitPage = Math.ceil(res.totalHits / 15);\n      if (res.hits.length === 0) {\n        iziNotFound();\n      }\n      innerImg(res.hits);\n      scrollBy(75);\n      const lightbox = new simpleLightbox('.gallery a');\n      if (res.hits.length < 15) {\n        refs.btnLoadMore.classList.add('visually-hidden');\n        iziInfo();\n      } else {\n        refs.btnLoadMore.classList.remove('visually-hidden');\n      }\n      refs.formEl.addEventListener('click', e => {\n        if (e.target.name !== 'text') return;\n        refs.input.value = '';\n      });\n    }\n  } catch (error) {\n    console.log(error.message);\n  }\n  stopLoader();\n});\n\nrefs.btnLoadMore.addEventListener('click', async () => {\n  refs.btnLoadMore.classList.add('visually-hidden');\n  startLoader();\n  if (page === limitPage) {\n    refs.btnLoadMore.classList.add('visually-hidden');\n    stopLoader();\n    return iziInfo();\n  }\n  page += 1;\n  const res = await searchImages(userValue, page);\n  insertImg(res.hits);\n  const lightbox = new simpleLightbox('.gallery a');\n  lightbox.refresh();\n  stopLoader();\n  scrollBy();\n  refs.btnLoadMore.classList.remove('visually-hidden');\n  if (res.hits.length < 15) {\n    refs.btnLoadMore.classList.add('visually-hidden');\n    iziInfo();\n  }\n});\n\nfunction iziError() {\n  console.log('sdsd');\n  refs.ul.innerHTML = '';\n  refs.btnLoadMore.classList.add('visually-hidden');\n  return iziToast.error({\n    message: 'Please fill in the input field',\n    position: 'topRight',\n  });\n}\nfunction iziNotFound() {\n  iziToast.error({\n    message: 'Image is not found',\n    position: 'topRight',\n  });\n}\nfunction iziInfo() {\n  iziToast.info({\n    message: \"We're sorry, but you've reached the end of search results\",\n    position: 'topRight',\n  });\n}\nfunction startLoader() {\n  refs.btnLoadMore.insertAdjacentHTML(\n    'afterend',\n    '<div id=\"loader\" class=\"loader\"></div>'\n  );\n}\nfunction stopLoader() {\n  document.querySelector('.loader').remove();\n}\n\nfunction scrollBy(val) {\n  const imgHeight = refs.ul.firstElementChild.getBoundingClientRect().height;\n  window.scrollBy({\n    top: val || imgHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["baseUrl","searchImages","value","page","limitPage","axios","error","ulEl","imgTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imagesTemplate","arr","innerImg","hits","markup","insertImg","refs","userValue","evt","startLoader","iziError","res","iziNotFound","scrollBy","lightbox","simpleLightbox","iziInfo","e","stopLoader","iziToast","val","imgHeight"],"mappings":"owBACA,MAAMA,EAAU,2BAET,eAAeC,EAAaC,EAAOC,EAAO,EAAGC,EAAW,CAC7D,GAAI,CAYF,OAXiB,MAAMC,EAAM,IAAIL,EAAS,CACxC,OAAQ,CACN,IAAK,uCACL,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,EAAGE,EACH,KAAAC,EACA,SAAU,EACX,CACP,CAAK,GACe,IACjB,OAAQG,EAAO,CACd,QAAQ,MAAM,gBAAiBA,CAAK,CACrC,CACH,CCpBA,MAAMC,EAAO,SAAS,cAAc,UAAU,EAE9C,SAASC,EAAY,CACnB,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,EAAG,CACD,MAAO;AAAA;AAAA,mBAEUL,CAAa,gCAAgCD,CAAY,UAAUE,CAAI;AAAA;AAAA,4DAE9BC,CAAK;AAAA,4DACLC,CAAK;AAAA,+DACFC,CAAQ;AAAA,gEACPC,CAAS;AAAA;AAAA;AAAA,SAIzE,CAEA,SAASC,EAAeC,EAAK,CAC3B,OAAOA,EAAI,IAAIT,CAAW,EAAE,KAAK,EAAE,CACrC,CAEO,SAASU,EAASC,EAAM,CAC7B,MAAMC,EAASJ,EAAeG,CAAI,EAClCZ,EAAK,UAAYa,CACnB,CACO,SAASC,EAAUF,EAAM,CAC9B,MAAMC,EAASJ,EAAeG,CAAI,EAClCZ,EAAK,mBAAmB,YAAaa,CAAM,CAC7C,CC1BA,MAAME,EAAO,CACX,SAAU,SAAS,cAAc,aAAa,EAC9C,OAAQ,SAAS,cAAc,OAAO,EACtC,MAAO,SAAS,cAAc,eAAe,EAC7C,GAAI,SAAS,cAAc,IAAI,EAC/B,YAAa,SAAS,cAAc,YAAY,CAClD,EAEA,IAAIlB,EAAY,EACZmB,EACApB,EAAO,EAEXmB,EAAK,OAAO,iBAAiB,SAAU,MAAME,GAAO,CAClD,GAAI,CAMF,GALAA,EAAI,eAAc,EAClBC,IACAF,EAAYD,EAAK,MAAM,MAAM,KAAI,EACjCnB,EAAO,EAEH,CAACoB,EACHG,QACK,CACL,MAAMC,EAAM,MAAM1B,EAAasB,EAAWpB,CAAI,EAE9CC,EAAY,KAAK,KAAKuB,EAAI,UAAY,EAAE,EACpCA,EAAI,KAAK,SAAW,GACtBC,IAEFV,EAASS,EAAI,IAAI,EACjBE,EAAS,EAAE,EACX,MAAMC,EAAW,IAAIC,EAAe,YAAY,EAC5CJ,EAAI,KAAK,OAAS,IACpBL,EAAK,YAAY,UAAU,IAAI,iBAAiB,EAChDU,KAEAV,EAAK,YAAY,UAAU,OAAO,iBAAiB,EAErDA,EAAK,OAAO,iBAAiB,QAASW,GAAK,CACrCA,EAAE,OAAO,OAAS,SACtBX,EAAK,MAAM,MAAQ,GAC3B,CAAO,CACF,CACF,OAAQhB,EAAO,CACd,QAAQ,IAAIA,EAAM,OAAO,CAC1B,CACD4B,GACF,CAAC,EAEDZ,EAAK,YAAY,iBAAiB,QAAS,SAAY,CAGrD,GAFAA,EAAK,YAAY,UAAU,IAAI,iBAAiB,EAChDG,IACItB,IAASC,EACX,OAAAkB,EAAK,YAAY,UAAU,IAAI,iBAAiB,EAChDY,IACOF,EAAO,EAEhB7B,GAAQ,EACR,MAAMwB,EAAM,MAAM1B,EAAasB,EAAWpB,CAAI,EAC9CkB,EAAUM,EAAI,IAAI,EACD,IAAII,EAAe,YAAY,EACvC,QAAO,EAChBG,IACAL,IACAP,EAAK,YAAY,UAAU,OAAO,iBAAiB,EAC/CK,EAAI,KAAK,OAAS,KACpBL,EAAK,YAAY,UAAU,IAAI,iBAAiB,EAChDU,IAEJ,CAAC,EAED,SAASN,GAAW,CAClB,eAAQ,IAAI,MAAM,EAClBJ,EAAK,GAAG,UAAY,GACpBA,EAAK,YAAY,UAAU,IAAI,iBAAiB,EACzCa,EAAS,MAAM,CACpB,QAAS,iCACT,SAAU,UACd,CAAG,CACH,CACA,SAASP,GAAc,CACrBO,EAAS,MAAM,CACb,QAAS,qBACT,SAAU,UACd,CAAG,CACH,CACA,SAASH,GAAU,CACjBG,EAAS,KAAK,CACZ,QAAS,4DACT,SAAU,UACd,CAAG,CACH,CACA,SAASV,GAAc,CACrBH,EAAK,YAAY,mBACf,WACA,wCACJ,CACA,CACA,SAASY,GAAa,CACpB,SAAS,cAAc,SAAS,EAAE,OAAM,CAC1C,CAEA,SAASL,EAASO,EAAK,CACrB,MAAMC,EAAYf,EAAK,GAAG,kBAAkB,sBAAuB,EAAC,OACpE,OAAO,SAAS,CACd,IAAKc,GAAOC,EAAY,EACxB,SAAU,QACd,CAAG,CACH"}